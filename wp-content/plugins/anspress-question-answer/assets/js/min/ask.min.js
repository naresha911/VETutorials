!function(a){AnsPress.views.AskView=Backbone.View.extend({initialize:function(){},events:{'submit [ap="questionForm"]':"questionForm",'keyup [data-action="suggest_similar_questions"]':"questionSuggestion"},questionForm:function(b){return a(b.target).find(".have-error").removeClass("have-error"),a(b.target).find(".error").remove(),AnsPress.showLoading(a(b.target).find(".ap-btn-submit")),AnsPress.ajax({data:a(b.target).serialize(),success:function(c){"undefined"!=typeof grecaptcha&&"undefined"!=typeof widgetId1&&grecaptcha.reset(widgetId1),AnsPress.hideLoading(a(b.target).find(".ap-btn-submit")),AnsPress.uploader&&AnsPress.uploader.splice(),c.success&&(window.location=c.redirect),c.errors&&_.each(c.errors,function(b,c){a(".ap-field-"+c).addClass("have-error"),"description"===c&&a(".ap-field-ap_upload").length>0&&(c="ap_upload"),a(".ap-field-"+c).append('<span class="error">'+b+"</span>")})}}),!1},suggestTimeout:null,questionSuggestion:function(b){var c=this;if(!disable_q_suggestion){var d=a(b.target).val();0!=d.length&&(null!=c.suggestTimeout&&clearTimeout(c.suggestTimeout),c.suggestTimeout=setTimeout(function(){c.suggestTimeout=null,AnsPress.ajax({data:{ap_ajax_action:"suggest_similar_questions",__nonce:ap_nonce,value:d},success:function(b){console.log(b),a("#similar_suggestions").html(b.html)}})},800))}}});new AnsPress.views.AskView({el:"#ap-ask-page"})}(jQuery);